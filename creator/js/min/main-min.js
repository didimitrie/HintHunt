function show_map(o){var e=o.coords.latitude,t=o.coords.longitude,a=new google.maps.LatLng(e,t),n={scrollwheel:!0,zoom:17,center:a,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,draggable:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("the-map"),n),map.setOptions({styles:style});var s={path:"M 0,-1 0,1",strokeOpacity:1,scale:4};traces=new google.maps.Polyline({path:coords,strokeColor:"#00C7FF",strokeOpacity:.1,strokeWeight:10,icons:[{icon:s,offset:"0",repeat:"20px"}]}),traces.setMap(map)}function show_map2(){var o=50.85,e=4.35,t=new google.maps.LatLng(o,e),a={scrollwheel:!0,zoom:17,center:t,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,draggable:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("the-map"),a),map.setOptions({styles:style});var n={path:"M 0,-1 0,1",strokeOpacity:1,scale:4};traces=new google.maps.Polyline({path:coords,strokeColor:"#00C7FF",strokeOpacity:.1,strokeWeight:10,icons:[{icon:n,offset:"0",repeat:"20px"}]}),traces.setMap(map)}function error(){alert("please position")}function getR(o,e){return Math.random()*(e-o)+o}function closeControls(){$(".pin-details").velocity("transition.shrinkOut",{duration:400,easing:[200,20],delay:0}),$(".tip-input").attr({disabled:"disabled"})}function openControls(){$(".pin-details").velocity("transition.expandIn",{duration:300})}function addCoordsToPath(){var o=new google.maps.Marker({position:map.getCenter(),map:map,icon:{path:google.maps.SymbolPath.CIRCLE,scale:7}});google.maps.event.addListener(o,"click",function(){map.setZoom(map.getZoom()),map.panTo(o.getPosition())});var e=traces.getPath();e.push(map.getCenter());var t={tip:$(".tip-input").val(),location:map.getCenter(),zoom:map.getZoom()};myCoords.push(t),console.log(myCoords),$(".tip-input").val("")}var map,geocoder,traces,coords=[],traces,myCoords=[],google;google.maps.LatLng.prototype.kmTo=function(o){var e=Math,t=e.PI/180,a=this.lat()*t,n=o.lat()*t,s=a-n,r=this.lng()*t-o.lng()*t,p=2*e.asin(e.sqrt(e.pow(e.sin(s/2),2)+e.cos(a)*e.cos(n)*e.pow(e.sin(r/2),2)));return 6378.137*p},google.maps.Polyline.prototype.inKm=function(o){for(var e=this.getPath(o),t=e.getLength(),a=0,n=0;t-1>n;n++)a+=e.getAt(n).kmTo(e.getAt(n+1));return a};var style=[{stylers:[{hue:"#ff1a00"},{invert_lightness:!0},{saturation:-100},{lightness:33},{gamma:.5}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#2D333C"}]}],myFirebaseRef;$(window).load(function(){myFirebaseRef=new Firebase("https://hint-hunt.firebaseio.com"),$(".tip-input").hammer().on("tap",function(o){$(this).removeAttr("disabled"),$(this).focus()}),$(".savebutton").hammer().on("tap",function(){var o=myFirebaseRef.child("routes");o.push(myCoords)});var o="closed";$(".close-input").hammer().on("tap",function(e){"open"===o&&(closeControls(),addCoordsToPath(),o="closed")}),$("#the-map").hammer().on("tap",function(e){"open"===o&&(closeControls(),o="closed")}),$(".pin-overlay").hammer().on("tap",function(e){$(this).velocity("callout.pulse"),$("#waypoint-number").html("#"+(myCoords.length+1)),$("#path-length").html("Length: "+Math.round(100*traces.inKm())/100+"km"),"closed"===o&&(openControls(),o="open")}),show_map2()});