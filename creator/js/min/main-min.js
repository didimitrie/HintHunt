function show_map(e){var o=e.coords.latitude,t=e.coords.longitude,a=new google.maps.LatLng(o,t),n={scrollwheel:!0,zoom:17,center:a,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,draggable:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("the-map"),n),map.setOptions({styles:style});var s={path:"M 0,-1 0,1",strokeOpacity:1,scale:4};traces=new google.maps.Polyline({path:coords,strokeColor:"#00C7FF",strokeOpacity:.1,strokeWeight:10,icons:[{icon:s,offset:"0",repeat:"20px"}]}),traces.setMap(map)}function show_map2(){var e=50.85,o=4.35,t=new google.maps.LatLng(e,o),a={scrollwheel:!0,zoom:17,center:t,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,draggable:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("the-map"),a),map.setOptions({styles:style});var n={path:"M 0,-1 0,1",strokeOpacity:1,scale:4};traces=new google.maps.Polyline({path:coords,strokeColor:"#00C7FF",strokeOpacity:.1,strokeWeight:10,icons:[{icon:n,offset:"0",repeat:"20px"}]}),traces.setMap(map)}function error(){alert("please position")}function getR(e,o){return Math.random()*(o-e)+e}function closeControls(){$(".pin-details").velocity("transition.slideUpOut",{duration:400}),$(".main").velocity({translateY:["0vh","20vh"],scale:1},{duration:300}),$(".close-input").velocity("transition.flipXOut",{delay:0,duration:0}).velocity({scale:1},0),$(".pin-overlay").velocity({scale:1},200)}function openControls(){$(".main").velocity({translateY:["20vh",0],scale:[2,1]},{duration:300}),$(".pin-details").velocity("transition.slideDownIn",{duration:300,delay:150}),$(".close-input").velocity("transition.flipXIn",{delay:400}).velocity({scale:1.6})}function addCoordsToPath(){var e=new google.maps.Marker({position:map.getCenter(),map:map,icon:{path:google.maps.SymbolPath.CIRCLE,scale:7}});google.maps.event.addListener(e,"click",function(){map.setZoom(map.getZoom()),map.panTo(e.getPosition())});var o=traces.getPath();o.push(map.getCenter());var t={tip:""===$(".tip-input").val()?" ":"blast",location:map.getCenter(),zoom:map.getZoom()};myCoords.push(t),$(".tip-input").val("")}var map,geocoder,traces,coords=[],traces,myCoords=[],google;google.maps.LatLng.prototype.kmTo=function(e){var o=Math,t=o.PI/180,a=this.lat()*t,n=e.lat()*t,s=a-n,l=this.lng()*t-e.lng()*t,r=2*o.asin(o.sqrt(o.pow(o.sin(s/2),2)+o.cos(a)*o.cos(n)*o.pow(o.sin(l/2),2)));return 6378.137*r},google.maps.Polyline.prototype.inKm=function(e){for(var o=this.getPath(e),t=o.getLength(),a=0,n=0;t-1>n;n++)a+=o.getAt(n).kmTo(o.getAt(n+1));return a};var style=[{stylers:[{hue:"#ff1a00"},{invert_lightness:!0},{saturation:-100},{lightness:33},{gamma:.9}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#2D333C"}]}],myFirebaseRef;$(window).load(function(){myFirebaseRef=new Firebase("https://hint-hunt.firebaseio.com");var e="closed";$(".route-review").hammer().on("pandown",function(e){console.log(e.gesture.deltaX)}),$(".save-route").hammer().on("tap",function(){"closed"===e&&($(".route-review").velocity({translateY:"-100vh"},{duration:200}),$(".info-stuff").velocity("transition.flipXIn",{display:null,stagger:200,delay:300}),e="review")}),$(".close-input").hammer().on("tap",function(o){"open"===e&&(o.preventDefault(),closeControls(),addCoordsToPath(),e="closed")}),$(".pin-details").hammer().on("tap",function(o){"open"===e&&(o.preventDefault(),closeControls(),e="closed")}),$(".pin-overlay").hammer().on("tap",function(o){$(this).velocity({scale:.4},300),$("#waypoint-number").html("#"+(myCoords.length+1)),$("#path-length").html("Length: "+Math.round(100*traces.inKm())/100+"km"),"closed"===e&&(openControls(),e="open")}),show_map2()});