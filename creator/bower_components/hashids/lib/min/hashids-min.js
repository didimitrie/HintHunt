var Hashids=function(){"use strict";function t(t,s,e){var h,i,n,r,a,p,l;for(this.version="1.0.2",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(s,10)>0?s:0,this.salt="string"==typeof t?t:"","string"==typeof e&&(this.alphabet=e),h="",i=0,r=this.alphabet.length;i!==r;i++)-1===h.indexOf(this.alphabet.charAt(i))&&(h+=this.alphabet.charAt(i));if(this.alphabet=h,this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(-1!==this.alphabet.search(" "))throw this.errorAlphabetSpace;for(i=0,r=this.seps.length;i!==r;i++)n=this.alphabet.indexOf(this.seps.charAt(i)),-1===n?this.seps=this.seps.substr(0,i)+" "+this.seps.substr(i+1):this.alphabet=this.alphabet.substr(0,n)+" "+this.alphabet.substr(n+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)&&(a=Math.ceil(this.alphabet.length/this.sepDiv),1===a&&a++,a>this.seps.length?(p=a-this.seps.length,this.seps+=this.alphabet.substr(0,p),this.alphabet=this.alphabet.substr(p)):this.seps=this.seps.substr(0,a)),this.alphabet=this.consistentShuffle(this.alphabet,this.salt),l=Math.ceil(this.alphabet.length/this.guardDiv),this.alphabet.length<3?(this.guards=this.seps.substr(0,l),this.seps=this.seps.substr(l)):(this.guards=this.alphabet.substr(0,l),this.alphabet=this.alphabet.substr(l))}return t.prototype.encode=function(){var t="",s,e,h=Array.prototype.slice.call(arguments);if(!h.length)return t;for(h[0]instanceof Array&&(h=h[0]),s=0,e=h.length;s!==e;s++)if("number"!=typeof h[s]||h[s]%1!==0||h[s]<0)return t;return this._encode(h)},t.prototype.decode=function(t){var s=[];return t.length&&"string"==typeof t?this._decode(t,this.alphabet):s},t.prototype.encodeHex=function(t){var s,e,h;if(t=t.toString(),!/^[0-9a-fA-F]+$/.test(t))return"";for(h=t.match(/[\w\W]{1,12}/g),s=0,e=h.length;s!==e;s++)h[s]=parseInt("1"+h[s],16);return this.encode.apply(this,h)},t.prototype.decodeHex=function(t){var s=[],e,h,i=this.decode(t);for(e=0,h=i.length;e!==h;e++)s+=i[e].toString(16).substr(1);return s},t.prototype._encode=function(t){var s,e,h,i,n,r,a,p,l,o,u,g,c=this.alphabet,b=t.length,f=0;for(h=0,i=t.length;h!==i;h++)f+=t[h]%(h+100);for(e=s=c.charAt(f%c.length),h=0,i=t.length;h!==i;h++)n=t[h],r=e+this.salt+c,c=this.consistentShuffle(c,r.substr(0,c.length)),a=this.hash(n,c),s+=a,b>h+1&&(n%=a.charCodeAt(0)+h,p=n%this.seps.length,s+=this.seps.charAt(p));for(s.length<this.minHashLength&&(l=(f+s[0].charCodeAt(0))%this.guards.length,o=this.guards[l],s=o+s,s.length<this.minHashLength&&(l=(f+s[2].charCodeAt(0))%this.guards.length,o=this.guards[l],s+=o)),u=parseInt(c.length/2,10);s.length<this.minHashLength;)c=this.consistentShuffle(c,c),s=c.substr(u)+s+c.substr(0,u),g=s.length-this.minHashLength,g>0&&(s=s.substr(g/2,this.minHashLength));return s},t.prototype._decode=function(t,s){var e=[],h=0,i,n,r,a,p=new RegExp("["+this.guards+"]","g"),l=t.replace(p," "),o=l.split(" ");if((3===o.length||2===o.length)&&(h=1),l=o[h],"undefined"!=typeof l[0]){for(i=l[0],l=l.substr(1),p=new RegExp("["+this.seps+"]","g"),l=l.replace(p," "),o=l.split(" "),h=0,n=o.length;h!==n;h++)r=o[h],a=i+this.salt+s,s=this.consistentShuffle(s,a.substr(0,s.length)),e.push(this.unhash(r,s));this._encode(e)!==t&&(e=[])}return e},t.prototype.consistentShuffle=function(t,s){var e,h,i,n,r,a;if(!s.length)return t;for(n=t.length-1,r=0,a=0;n>0;n--,r++)r%=s.length,a+=e=s.charAt(r).charCodeAt(0),h=(e+r+a)%n,i=t.charAt(h),t=t.substr(0,h)+t.charAt(n)+t.substr(h+1),t=t.substr(0,n)+i+t.substr(n+1);return t},t.prototype.hash=function(t,s){var e="",h=s.length;do e=s.charAt(t%h)+e,t=parseInt(t/h,10);while(t);return e},t.prototype.unhash=function(t,s){var e=0,h,i;for(i=0;i<t.length;i++)h=s.indexOf(t[i]),e+=h*Math.pow(s.length,t.length-i-1);return e},"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define(function(){return t}),t}();